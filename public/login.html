<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login Page</title>
</head>

<script>
let params = (new URL(document.location)).searchParams;
  // login errors from server has been input into the query string and assigned to the variable "error_check". if error_check is in the query string, get it, pull out the value, and display it in window alert
  // store in function and call it when the page loads 
  window.onload = function () {

// if query string has the array "errors_check" (passed back by via the server), params.get the array, use JSON parse to turn it from a string back into a js object (I learned to do this by RTFM), store this in a variable
if (params.has(`error_check`)) {
  var errors = JSON.parse(params.get(`error_check`));
}
// if the variable storing the error_check exists, alert errors
if (errors) {
  window.alert(errors);
}

// if user has succesfully registered a new account, alert them when they come back to this page
if (params.has(`successful_login`)) {
  var success = JSON.parse(params.get(`successful_login`));
}
if (success) {
  window.alert(success);
}}
</script>


<body>
  <h1>Please log in to continue</h1>
    <script> // Send login data  to server using a form</script>

     <form name="login_form" action="/login" method="POST">

    <div class="login-container">
      <table>
        <tr>
          <td class="login_row">
            <label for="uname"><b>Email Address</b></label>
            <input type="text" placeholder="Enter Username" name="uname" required>
          </td>
        </tr>

        <tr>
          <td class="login_row">


            <label for="psw"><b>Password</b></label>
            <input type="password" placeholder="Enter Password" name="psw" required>
          </td>
        </tr>

        <tr>
          <td class="login_row">
            <button type="submit"  class = "login_confirm_button" name="button">Login</button>
          </td>
        </tr>


        <script>
      // I am adding in this next "<div>" to give users the option of registering a new account; completed via a hyperlink
        </script>

        <tr>
          <td class="cancel_row">
              <button type="button" class="cancel_button"
                onclick="window.location.href='./index.html'">Cancel</button>

          </td>
        </tr>
      </table>
    </div>
  </form>
</body>
</html>